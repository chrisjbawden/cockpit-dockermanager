<!-- index.html */ -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Cockpit Docker Manager</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* Fallback spinner if style.css hasn't loaded yet */
    #loading-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:9999}
    .spinner{border:8px solid #f3f3f3;border-top:8px solid #3498db;border-radius:50%;width:60px;height:60px;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div id="loading-overlay"><div class="spinner"></div></div>

  <div id="action-banner" style="display:none;position:fixed;top:0;left:0;width:100%;background:#0e86d4;opacity:.5;color:#000;padding:10px;text-align:center;font-weight:bold;z-index:1000;box-shadow:0 2px 4px rgba(0,0,0,.1)"></div>

  <div class="app-header" id="app-header">
    <div class="header-bar">
      <h2>Cockpit Docker Manager</h2>
      <button id="pin-btn" aria-label="Pin header">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2l-1 1 2 2-3 3-3-3-2 2 3 3-6 6v2h2l6-6 3 3 2-2-3-3 3-3 2 2 1-1-5-5z"/></svg>
      </button>
    </div>

    <div id="toolbar">
      <div class="toolbar-left">
        <div id="search-control" class="search-control" aria-label="Search containers by name">
          <button id="search-toggle" class="search-toggle" type="button" aria-label="Toggle search">
            <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18" aria-hidden="true">
              <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
          </button>
          <input id="search-input" class="modern-input" type="text" placeholder="Search containers..." autocomplete="off" />
        </div>
      </div>

      <div class="toolbar-right">
        <button id="image-toggle-btn" aria-label="Images toggle">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 6H4c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 10H4V8h16v8zM6 14h2v2H6v-2zm4 0h8v2h-8v-2z"/></svg>
        </button>

        <button id="terminal-toggle-btn" aria-label="Toggle terminal">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 4h18a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V6 a2 2 0 0 1 2-2zm0 2v12h18V6H3zm2.5 2.5L8 12 5.5 15.5 7 17l4-5-4-5-1.5 1.5zM13 17h5v-2h-5v2z"/></svg>
        </button>

        <button id="refresh-button" class="refresh-button">Refresh</button>

        <div class="sort-control">
          <select id="sort-select" class="modern-select">
            <option value="name">Name (A–Z)</option>
            <option value="uptime">Uptime (longest)</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <div id="header-spacer" aria-hidden="true"></div>

  <div id="container-list">Loading...</div>

  <!-- Manage Modal -->
  <div id="manage-modal" class="logs-modal" style="display:none;">
    <div class="logs-modal-content">
      <div class="logs-modal-header">
        <h3><span id="manage-title-prefix">Manage:</span> <span id="manage-container-name"></span></h3>
        <div class="logs-controls"><button id="manage-close-btn" class="logs-btn">✖️ Close</button></div>
      </div>

      <!-- Tabs row with delete button pushed to the right -->
      <div class="tabs">
        <div class="tabs-left">
          <button class="tab-btn active" data-tab="tab-logs">Logs</button>
          <button class="tab-btn" data-tab="tab-terminal">Terminal</button>
          <button class="tab-btn" data-tab="tab-details">Details</button>
        </div>
        <div class="tabs-right">
          <button id="container-delete-btn" class="logs-btn danger" title="Delete container">🗑️ Delete</button>
        </div>
      </div>

      <div class="tab-panels">
        <section id="tab-logs" class="tab-panel active">
          <div class="logs-controls" style="padding:10px 16px;">
            <button id="tablogs-follow-btn" class="logs-btn active">⏸️ Stop</button>
            <button id="tablogs-clear-btn" class="logs-btn">🗑️ Clear</button>
          </div>
          <div id="tablogs-content" class="logs-content"><div class="loading">Loading logs…</div></div>
        </section>

        <section id="tab-terminal" class="tab-panel">
          <div class="terminal-toolbar">
            <label for="shell-select">Shell:</label>
            <select id="shell-select" class="modern-select" style="width:auto;">
              <option value="/bin/bash">/bin/bash</option>
              <option value="/bin/sh">/bin/sh</option>
            </select>
            <button id="open-terminal-btn" class="logs-btn" type="button">Open terminal</button>
          </div>
          <div id="modal-terminal" class="modal-terminal">
            <pre id="modal-terminal-output" class="modal-terminal-output"></pre>
            <div class="modal-terminal-inputbar">
              <span class="prompt">$</span>
              <input id="modal-terminal-input" type="text" placeholder="Type a command and press Enter…" autocomplete="off" disabled>
            </div>
          </div>
          <div class="terminal-tip">Tip: Press Enter to send, Ctrl+C to interrupt the running process.</div>
        </section>

        <section id="tab-details" class="tab-panel">
          <div id="details-content" class="logs-content"><div class="loading">Loading details…</div></div>
        </section>
      </div>
    </div>
  </div>

  <!-- Bottom terminal panel  -->
  <div id="terminal-panel">
    <div id="terminal-resizer"></div>
    <iframe id="terminal-iframe" src="/cockpit/@localhost/system/terminal.html"></iframe>
  </div>

  <div id="version-stamp">
    <a href="https://github.com/chrisjbawden/cockpit-dockermanager" style="color:#fff;text-decoration:none" target="_blank">V1.0.7</a>
  </div>

  <script src="../base1/cockpit.js"></script>
  <script src="app.js"></script>
</body>
</html>
